# 树状数组相关题目

前置知识

讲解022 \-  _归并分治_ ，本节课题目1、题目5需要

讲解059 \-  _链式前向星建图_ ，本节课题目5需要

讲解108 \-  _树状数组_

上节课讲述：

树状数组原理、扩展、代码详解

本节课讲述：

树状数组相关题目，进一步练习树状数组的使用

最经典的用法： _一维数组上的单点增加、范围查询_

本节课所有题目都和这个用法有关，这是树状数组最常考的用法

其他用法的相关题目要么比较冷门，要么可以被线段树解决，讲解110会开始讲述线段树的内容

题目1

逆序对数量

给定一个长度为n的数组arr

如果 i \< j 且 arr\[i\] > arr\[j\]

那么\(i\,j\)就是一个逆序对

求arr中逆序对的数量

1 <= n <= 5 \* 10^5

1 <= arr\[i\] <= 10^9

测试链接 : [https://www\.luogu\.com\.cn/problem/P1908](https://www.luogu.com.cn/problem/P1908)

归并分治实现 : 无需离散化代码、使用空间少、常数时间优良。 _不能实时查询，只能是离线的批量过程_

树状数组实现 : 需要离散化代码、使用空间多、常数时间稍慢。 _可以实时查询，也就是在线的查询_

两种方法都要掌握， _树状数组可以方便的在每个位置进行查询（在线）_ ，很多题目都需要这种类型的查询

两个方法的时间复杂度都是O\(n \* logn\)

题目2

升序三元组数量

给定一个数组arr，如果i < j < k且arr\[i\] < arr\[j\] < arr\[k\]

那么称\(i\, j\, k\)为一个升序三元组

返回arr中升序三元组的数量

测试链接 : [https://www\.luogu\.com\.cn/problem/P1637](https://www.luogu.com.cn/problem/P1637)

题目3

最长递增子序列的个数

给定一个未排序的整数数组nums，返回最长递增子序列的个数

测试链接 : https://leetcode\.cn/problems/number\-of\-longest\-increasing\-subsequence

本题在讲解072，最长递增子序列问题与扩展，就做出过预告

具体可以看讲解072视频最后的部分

题目4

HH的项链

一共有n个位置，每个位置颜色给定，i位置的颜色是arr\[i\]

一共有m个查询，question\[i\] = \{li\, ri\}

表示第i条查询想查arr\[li\.\.ri\]范围上一共有多少种不同颜色

返回每条查询的答案

1 <= n、m、arr\[i\] <= 10^6

1 <= li <= ri <= n

测试链接 : https://www\.luogu\.com\.cn/problem/P1972

题目5

得到回文串的最少操作次数

给你一个只包含小写英文字母的字符串s

每一次操作可以选择s中两个相邻的字符进行交换

返回将s变成回文串的最少操作次数

输入数据会确保s一定能变成一个回文串

测试链接 :

https://leetcode\.cn/problems/minimum\-number\-of\-moves\-to\-make\-palindrome

