# 线性基-下

前置知识

讲解110 \- 线段树原理和代码详解，本节课题目2需要

讲解118 \- 树上倍增和LCA\-上 \+ dfs递归版改成迭代版，本节课题目3、题目4需要

讲解136 \- 异或空间线性基\-上

视频分为上下两期

上期讲述：异或空间线性基原理，普通消元 & 高斯消元生成线性基的过程图解，练习常见题目

本题讲述：向量空间线性基、异或空间线性基的合并、异或空间线性基和其他内容结合的题目

题目1

装备购买

一共有n个物品，每个物品都有m个属性值

下面定义什么是不必要的物品：如果已经选择了k个物品，此时又有一件当前物品

如果给已经选择的物品分配一组相乘的系数，并把属性值相加，就能得到当前物品

那么就说当前物品是不必要的，比如下面的例子

a = \{ 4\, 6\, 2 \}\, b = \{ 2\, 8\, 4 \}\, c = \{ 6\, 19\, 9 \}

a \* 0\.5 \+ b \* 2 = c，那么c物品是不必要的

每个物品都有价格，现在希望尽量多的购买物品，但不能出现不必要的物品

返回最多能买几件物品和最少的花费

1 <= n、m <= 500    0 <= 属性值 <= 1000

测试链接 : [https://www\.luogu\.com\.cn/problem/P3265](https://www.luogu.com.cn/problem/P3265)

向量空间线性基也可以用高斯消元找到标准形式，过程和异或空间线性基类似，不再赘述

题目2

P哥的桶

一共有n个桶，排成一排，编号1~n，每个桶可以装下任意个数字

高效的实现如下两个操作

操作 1 k v : 把数字v放入k号桶中

操作 2 l r : 可以从l\.\.r号桶中随意拿数字，返回异或和最大的结果

1 <= n、m <= 5 \* 10^4

0 <= v <= 2^31 \- 1

测试链接 : [https://www\.luogu\.com\.cn/problem/P4839](https://www.luogu.com.cn/problem/P4839)

异或空间线性基 \+ 线段树

题目3

幸运数字

一共有n个点，编号1~n，由n\-1条边连成一棵树，每个点上有数字

一共有q条查询，每次返回a到b的路径上，可以随意选择数字，能得到的最大异或和

1 <= n <= 2 \* 10^4

1 <= q <= 2 \* 10^5

0 <= 点上的数字 <= 2^60

测试链接 : [https://www\.luogu\.com\.cn/problem/P3292](https://www.luogu.com.cn/problem/P3292)

异或空间线性基的替换 \+ 树上倍增 \+ 递归改迭代

题目4

路径最大异或和

一共有n个点，编号1~n，由m条无向边连接

每条边有权值，输入保证图是联通的，可能有环

找到1到n的一条路径，路径可以重复经过某些点或边

当一条边在路径中出现了多次时，异或的时候也要算多次

希望找到一条从1到n的路径，所有边权异或和尽量大，返回这个最大异或和

1 <= n <= 50000    1 <= m <= 100000    0 <= 边权 <= 10^18

测试链接 : [https://www\.luogu\.com\.cn/problem/P4151](https://www.luogu.com.cn/problem/P4151)

异或空间线性基 \+ 图的分析 \+ 递归改迭代

本题严格来说属于基环树dp的范畴，但哪怕没有系统学过基环树dp，本题的解法也能理解

基环树dp会在【挺难】阶段的课程讲述

