# 摩尔投票大加强，线段树里捉海王

前置知识

讲解110 \- 线段树原理和代码详解

讲解113 \- 线段树解决区间合并的问题

前置知识只有本节课题目6需要，其他题不需要

摩尔投票算法又被戏称为寻找水王算法，是大厂笔试、面试非常高频的考点

本节视频讲述：摩尔投票6连问

题目1

出现次数大于n/2的数

给定一个大小为n的数组nums

水王数是指在数组中出现次数大于n/2的数

返回其中的水王数，如果数组不存在水王数返回\-1

测试链接 : https://leetcode\.cn/problems/majority\-element/

题目2

摩尔投票智力题

给定一堆选票，一开始所有选票都是背面向上、正面向下的放在桌子上

每张选票的正面写着投给了谁，每张选票的背面毫无差别

你有一台机器，可以验证任意两张选票上写的人名是否一样

如果有任何一个人，得票数超过半数，那么该人当选，宣告投票成功

如果没有人得票超过半数，那么无人当选，宣告投票失败

你只能利用机器，并且在全程不看选票正面的情况下

如何知道投票是成功还是失败？

如果失败，你需要向众人宣布这一点

如果投票成功，你需要找出任何一张写有当选人名字的选票

然后当着众人的面，在最后时刻才翻开这张选票，公布出当选者的名字

题目3

摩尔投票可以并发执行

如果允许多线程，如何让摩尔投票过程得到加速？

题目4

划分左右使其水王数相同

给定一个大小为n的数组nums

水王数是指在数组中出现次数大于n/2的数

返回其中的一个划分点下标，使得左侧水王数等于右侧水王数

如果数组不存在这样的划分返回\-1

测试链接 : https://leetcode\.cn/problems/minimum\-index\-of\-a\-valid\-split/

题目5

出现次数大于n/k的数

给定一个大小为n的数组nums，给定一个较小的正数k

水王数是指在数组中出现次数大于n/k的数

返回所有的水王数，如果没有水王数返回空列表

测试链接 : https://leetcode\.cn/problems/majority\-element\-ii/

题目6

子数组里的海王数

子数组的海王数首先必须是子数组上出现次数最多的数\(水王数\)，并且要求出现次数>=t，t是参数

设计一个数据结构并实现如下两个方法

1\) MajorityChecker\(int\[\] arr\) : 用数组arr对MajorityChecker初始化

2\) int query\(int l\, int r\, int t\) : 返回arr\[l\.\.\.r\]上的海王数，不存在返回\-1

测试链接 : https://leetcode\.cn/problems/online\-majority\-element\-in\-subarray/

