# 三进制状压dp

前置知识

讲解080、讲解081 \- 状压dp，其中讲解080的最后，讲了tsp问题，本节课题目3需要

讲解125 \- 轮廓线dp，本节课题目1、题目2需要

系统学习动态规划看讲解066~讲解088

如果每个格子，值的可能性不是2的幂，还要用二进制去拼状态的话，会浪费状态空间

此时可以选择直接用k进制来拼状态，比如3进制状态的表达、5进制状态的表达

很容易扩展到k进制状态的表达，如此一来，申请状态空间的时候，完全不浪费状态空间

课上重点图解

题目1

最大化网格幸福感

给定四个整数m、n、in、ex，表示m\*n的网格，以及in个内向的人，ex个外向的人

你来决定网格中应当居住多少人，并为每个人分配一个网格单元，不必让所有人都生活在网格中

每个人的幸福感计算如下：

内向的人开始时有120幸福感，但每存在一个邻居，他都会失去30幸福感

外向的人开始时有40幸福感，但每存在一个邻居，他都会得到20幸福感

邻居只包含上、下、左、右四个方向

网格幸福感是每个人幸福感的总和，返回最大可能的网格幸福感

1 <= m、n <= 5

1 <= in、ex <= 6

测试链接 : [https://leetcode\.cn/problems/maximize\-grid\-happiness/](https://leetcode.cn/problems/maximize-grid-happiness/)

有兴趣的同学可以自己改一下空间压缩的版本

题目2

用三种不同颜色为网格涂色

给你两个整数m和n，表示m\*n的网格，其中每个单元格最开始是白色

请你用红、绿、蓝三种颜色为每个单元格涂色，所有单元格都需要被涂色

要求相邻单元格的颜色一定要不同

返回网格涂色的方法数，答案对1000000007取余

1 <= m <= 5

1 <= n <= 1000

测试链接 :

https://leetcode\.cn/problems/painting\-a\-grid\-with\-three\-different\-colors/

有兴趣的同学可以自己改一下空间压缩的版本

题目3

节点最多经过两次的tsp问题

给定有n个地点，用m条边无向边连接，每条边有权值

你可以任选一点出发，目标是经过所有的点，最终不必回到出发点

并且每个点最多可以到达两次

返回总路程最小是多少

1 <= n <= 10

1 <= m <= 100

测试链接 : https://acm\.hdu\.edu\.cn/showproblem\.php?pid=3001

