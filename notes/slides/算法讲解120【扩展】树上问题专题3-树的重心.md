# 树上问题专题3-树的重心

前置知识

讲解059 - _ 链式前向星建图_

讲解078、讲解079 -  _树型dp_ ，系统学习动态规划看讲解066~讲解088

讲解118 -  _专题1：树上倍增和LCA-上_ ，树上倍增和tarjan解决LCA问题，递归函数改成迭代函数的技巧

树上问题专题讲述顺序

专题1：树上倍增和LCA-上，讲解118

专题2：树上倍增和LCA-下，讲解119

专题3：树的重心，讲解120，本节

专题4：树的直径，讲解121

专题5：树上差分，讲解122

专题6：换根dp，讲解123

树的静态点分治、树的动态点分治、树链剖分、基环树dp、启发式合并等内容会在【挺难】阶段讲述

树的重心有如下三种定义，求出来的点是一样的

1，以某个节点为根时，最大子树的节点数最少，那么这个节点是重心

2，以某个节点为根时，每颗子树的节点数不超过总节点数的一半，那么这个节点是重心

3，以某个节点为根时，所有节点都走向该节点的总边数最少，那么这个节点是重心

补充性质：

4，一棵树最多有两个重心，如果有两个重心，那么两个重心一定相邻

5，如果树上增加或者删除一个叶节点，转移后的重心最多移动一条边

6，如果把两棵树连起来，那么新树的重心一定在原来两棵树重心的路径上

7，树上的边权如果都为正数，不管边权怎么分布，所有节点都走向重心的总距离和最小

注意：

重心的这些性质，在讲述树的静态点分治时还会用到，将在【挺难】课程阶段继续讲述

题目1

平衡行为

一共有n个节点，编号1~n，有n-1条边形成一棵树

返回重心点，返回重心点最大子树的节点数

测试链接 : [http://poj.org/problem?id=1655](http://poj.org/problem?id=1655)

树的重心第一种求解方式

以某个节点为根时，最大子树的节点数最少，那么这个节点是重心

题目2

教父

一共有n个节点，编号1~n，有n-1条边形成一棵树

返回所有重心点

测试链接 : [http://poj.org/problem?id=3107](http://poj.org/problem?id=3107)

树的重心第二种求解方式

以某个节点为根时，每颗子树的节点数不超过总节点数的一半，那么这个节点是重心

题目3

牛群聚集

一共有n个节点，编号1~n，每个点有牛的数量

一共有n-1条边把所有点联通起来形成一棵树，每条边有权值

想把所有的牛汇聚在一点，希望走过的总距离最小

返回总距离最小是多少

测试链接 : [https://www.luogu.com.cn/problem/P2986](https://www.luogu.com.cn/problem/P2986)

带点权的树如何求重心，课上重点图解

同时本题利用了重心的性质：

如果树上的边权都是正数，不管边权具体怎么分布，所有节点走到重心的总距离和最小

题目4

删增边使其重心唯一

一共有n个节点，编号1~n，有n-1条边形成一棵树

现在希望重心是唯一的节点，调整的方式是先删除一条边、然后增加一条边

如果树上只有一个重心，你需要删掉连接重心的任意一条边，再把这条边加上(否则无法通过已经实测)

如果树上有两个重心，调整的方式是先删除一条边、然后增加一条边，使重心是唯一的

如果方案有多种，打印其中一种即可

比如先删除节点3和节点4之间的边，再增加节点4和节点7之间的边，那么打印:

"3 4"

"4 7"

测试链接 : https://www.luogu.com.cn/problem/CF1406C

