# 倍增优化

前置知识

讲解065 \- Floyd算法，本节课题目2需要

讲解066 ~ 讲解088 \- 【必备】阶段动态规划专题，整个专题都需要

讲解117 \- 倍增算法和ST表，本节课需要

动态规划优化专题的讲述顺序

专题1：优化尝试和状态设计\-上，讲解127

专题2：优化尝试和状态设计\-下，讲解128

专题3：倍增优化，讲解129，本节

专题4：单调队列/单调栈优化，讲解130

专题5：树状数组/线段树优化，讲解131

专题6：预处理数组优化，讲解132

以上内容是【扩展】课程阶段，动态规划优化的讲述内容

单调性优化的更多内容，比如斜率优化、四边形不等式优化等，会在【挺难】阶段的视频中讲述

题目1

参加会议II

给定n个会议，每个会议有开始时间、结束时间、收益三个值

参加会议就能得到收益，但是同一时间只能参加一个会议

一共能参加k个会议，如果选择参加某个会议，那么必须完整的参加完这个会议

会议结束日期是包含在会议内的，一个会议的结束时间等于另一个会议的开始时间，不能两个会议都参加

返回能得到的会议价值最大和

1 <= n \* k <= 10^6

1 <= 开始时间、结束时间 <= 10^9

1 <= 收益 <= 10^6

测试链接 :

[https://leetcode\.cn/problems/maximum\-number\-of\-events\-that\-can\-be\-attended\-ii/](https://leetcode.cn/problems/maximum-number-of-events-that-can-be-attended-ii/)

先简单回顾一下动态规划优化枚举的技巧，本题和倍增优化无关，和二分有关

题目2

跑路

一共有n个节点，编号1~n，一共有m条有向边，每条边1公里

有一个空间跑路器，每秒你都可以直接移动2^p公里，每秒钟可以随意决定p的值

题目保证1到n之间一定可以到达，返回1到n最少用几秒

2 <= n <= 50

m <= 10^4

p <= 64

测试链接 : [https://www\.luogu\.com\.cn/problem/P1613](https://www.luogu.com.cn/problem/P1613)

先掌握，讲解065 \- Floyd算法，然后再看这道题的讲述

题目3

统计重复个数

如果字符串x删除一些字符，可以得到字符串y，那么就说y可以从x中获得

给定s1和a，代表s1拼接a次，记为字符串x

给定s2和b，代表s2拼接b次，记为字符串y

现在把y拼接m次之后，得到的字符串依然可能从x中获得，返回尽可能大的m

s1、s2只由小写字母组成

1 <= s1长度、s2长度 <= 100

1 <= a、b <= 10^6

测试链接 : [https://leetcode\.cn/problems/count\-the\-repetitions/](https://leetcode.cn/problems/count-the-repetitions/)

根据题目的意思，给定的s1、s2长度一般，而a、b可能很大

所以最终时间复杂度不要和a、b的值有关

题目4

寻找最近和次近

给定一个长度为n的数组arr，下标1 ~ n范围，数组无重复值

关于近的定义，距离的定义如下:

对i位置的数字x来说，只关注右侧的数字，和x的差值绝对值越小就越近

距离为差值绝对值，如果距离一样，数值越小的越近

比如右侧的arr，对1位置的数字3来说

第一近是4位置的1，距离为2；第二近是2位置的5，距离为2

每个位置的数字都求第一近的位置及其距离、第二近的位置及其距离

分别用to1、dist1、to2、dist2数组表示，如果不存在用0表示

本题是为了题目5做准备，很有意思的题，和倍增优化无关， _展示数组手搓双向链表的实现_

为什么 _数组手搓双向链表的实现_ 很重要？有序表如果自己实现，代码量较大\(后续会讲\)

语言提供的有序表或双向链表，都是动态结构，笔试、比赛时不推荐动态结构，可能被卡空间

arr   = \{ 3\, 5\, 7\, 1 \}

1  2  3  4

to1   = \{ 4\, 3\, 4\, 0 \}

dist1 = \{ 2\, 2\, 6\, 0 \}

to2   = \{ 2\, 4\, 0\, 0 \}

dist2 = \{ 2\, 4\, 0\, 0 \}

题目5

开车旅行

给定一个长度为n的数组arr，下标1 ~ n范围，数组无重复值

_近的定义、距离的定义，和题目4一致_

a和b同坐一辆车开始往右旅行，a先开车，b后开车，此后每到达一点都换人驾驶

如果a在某点驾驶，那么车去往该点右侧第二近的点，如果b在某点驾驶，那么车去往该点右侧第一近的点

a和b从s位置出发，如果开车总距离超过x，或轮到某人时右侧无点可选，那么旅行停止

问题1 : 给定距离x0，返回1 ~ n\-1中从哪个点出发，a行驶距离 / b行驶距离，比值最小

如果从多个点出发时，比值都为最小，那么返回arr中的值 _最大_ 的点

问题2 : 给定s、x，返回旅行停止时，a开了多少距离、b开了多少距离

问题1只调用1次；问题2调用m次，每组有不同的s、x

1 <= n、m、s <= 10^5    \-10^9 <= arr\[i\] <= 10^9    1 <= x0、x <= 10^9

测试链接 : https://www\.luogu\.com\.cn/problem/P1081

