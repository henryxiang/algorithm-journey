# 预处理数组优化

前置知识

讲解066 ~ 讲解088 \-  _【必备】阶段动态规划专题，整个专题都需要_

动态规划优化专题的讲述顺序

专题1：优化尝试和状态设计\-上，讲解127

专题2：优化尝试和状态设计\-下，讲解128

专题3：倍增优化，讲解129

专题4：单调队列/单调栈优化，讲解130

专题5：树状数组/线段树优化，讲解131

专题6：预处理数组优化，讲解132，本节

以上内容是【扩展】课程阶段，动态规划优化的讲述内容

单调性优化的更多内容，比如斜率优化、四边形不等式优化等，会在【挺难】阶段的视频中讲述

题目1

休息k分钟最大会议和

给定一个长度为n的数组arr，表示从早到晚发生的会议，各自召开的分钟数

当选择一个会议并参加之后，必须休息k分钟

返回能参加的会议时长最大累加和

比如，arr = \{ 200\, 5\, 6\, 14\, 7\, 300 \}，k = 15

最好的选择为，选择200分钟的会议，然后必须休息15分钟

那么接下来的5分钟、6分钟、14分钟的会议注定错过

然后放弃7分钟的会议，而选择参加300分钟的会议

最终返回500

1 <= n、arr\[i\]、k <= 10^6

来自真实大厂笔试，对数器验证

利用预处理数组减少枚举的可能性

题目2

炮兵阵地

给定一个n \* m的二维数组grid，其中的1代表可以摆放炮兵，0代表不可以摆放

任何炮兵攻击范围是一个"十字型"的区域，具体是上下左右两个格子的区域

你的目的是在gird里摆尽量多的炮兵，但要保证任何两个炮兵之间无法互相攻击

返回最多能摆几个炮兵

1 <= n <= 100

1 <= m <= 10

0 <= grid\[i\]\[j\] <= 1

测试链接 : [https://www\.luogu\.com\.cn/problem/P2704](https://www.luogu.com.cn/problem/P2704)

利用预处理数组减少枚举的可能性

题目3

还原数组的方法数

原本有一个长度为n的数组arr，下标从1开始，数组中都是<=200的正数

并且任意i位置的数字都满足 : arr\[i\] <= max\(arr\[i\-1\]\, arr\[i\+1\]\)

特别的，arr\[1\] <= arr\[2\]，arr\[n\] <= arr\[n\-1\]

但是输入的arr中有些数字丢失了，丢失的数字用0表示

返回还原成不违规的arr有多少种方法，答案很大需要对998244353取余

3 <= n <= 10^4

测试链接 : [https://www\.nowcoder\.com/practice/49c5284278974cbda474ec13d8bd86a9](https://www.nowcoder.com/practice/49c5284278974cbda474ec13d8bd86a9)

不减少枚举的可能性，而是利用预处理数组加速枚举的过程

题目4

粉刷房子III

房子有n个，从左到右排列，编号1\.\.n，颜色有c种，编号1\.\.c

给定数组house，house\[i\]表示房子的颜色，如果house\[i\]为0说明房子没有涂色

你必须给每个没有涂色的房子涂上颜色，如果有颜色的房子不能改变颜色

给定二维数组cost，cost\[i\]\[v\]表示如果i号房涂成v号颜色，需要花费多少钱

相邻的、拥有同一种颜色的房子为1个街区

比如如果所有房子的颜色为: \{1\, 1\, 2\, 3\, 2\, 2\}，那么一共4个街区

最终所有的房子涂完颜色，一定要形成t个街区，返回最少的花费

1 <= t <= n <= 100    1 <= c <= 20

0 <= house\[i\] <= c    1 <= cost\[i\]\[v\] <= 10^4

测试链接 : [https://leetcode\.cn/problems/paint\-house\-iii/](https://leetcode.cn/problems/paint-house-iii/)

不减少枚举的可能性，而是利用预处理数组加速枚举的过程

题目5

从上到下挖砖块

一堆组成倒三角形状的砖埋在地里，一共有n层，第1层有n块砖，每层递减，类似如下数据

4 2 9 5

3 1 7

2 4

8

需要从第1层开始挖，每挖开一块砖都可以获得数值作为收益，第1层的砖可以随意挖

但是挖到下面的砖是有条件的，想挖i层的j号砖，你需要确保i\-1层的\(j、j\+1\)块砖已经被挖开

最多可以挖m块砖，返回最大的收益

1 <= n <= 50    1 <= m <= 1300    砖块数值 <= 100

测试链接 : [https://www\.luogu\.com\.cn/problem/P1437](https://www.luogu.com.cn/problem/P1437)

不减少枚举的可能性，而是利用预处理数组加速枚举的过程

